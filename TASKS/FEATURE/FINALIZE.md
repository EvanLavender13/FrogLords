# Finalize Feature

**Close the cycle, capture the truth, strengthen the foundation.**

---

## The Purpose

Finalization is not administrative closure—it's philosophical reflection. We document what emerged, calibrate our certainty, and strengthen the foundation for what comes next.

Every feature teaches us about the principles. The question is: did we listen?

---

## Prerequisites

- Code review complete with approval
- All stages validated and stable
- Emergent behaviors documented
- Principles maintained throughout

---

## Phase 1: Reflect on Emergence

### What Surprised Us?

Document the unexpected in `PLANS/<feature>_FEATURE.md`:

```markdown
## Emergent Discoveries

### What We Didn't Plan For
- [Behavior that emerged from simple rules]
- [System interactions that delighted]
- [Player possibilities we didn't foresee]

### What This Teaches
[How emergence validated or challenged our approach]

### What Becomes Possible
[New capabilities enabled by this system]
```

**Emergence is not bonus—it's validation that we built systems, not features.**

---

## Phase 2: Validate Against Principles

### The Six Questions

For the completed system, reflect honestly:

#### 1. Radical Simplicity
- Is this simpler than we initially imagined?
- What could we still remove?
- Did complexity emerge or was it added?

#### 2. Fundamental Composable Functions
- Does it compose cleanly with existing systems?
- Are there special cases we didn't foresee?
- Is it truly orthogonal?

#### 3. Solid Mathematical Foundations
- Did mathematical validation prevent issues?
- Are all formulas proven correct?
- Can we see everything that happens?

#### 4. Emergent Behavior
- Did it enable more than intended?
- What prescribed behaviors snuck in?
- Would we design it differently now?

#### 5. Consistency
- Does it behave predictably?
- Is player control preserved?
- Are there hidden inconsistencies?

#### 6. Principled Development
- Can we justify every decision made?
- Did we follow the principles?
- What did we learn about them?

Document in `PLANS/<feature>_FEATURE.md`:

```markdown
## Principle Reflection

### What We Got Right
[Which principles guided us well]

### What We Struggled With
[Where principles conflicted or were unclear]

### What We'd Do Differently
[How we'd apply principles better next time]

**Overall Adherence:** [1-10 for each principle]
```

---

## Phase 3: Calibrate Certainty

### Prediction vs Reality

Certainty is learned, not assumed. Compare our prediction to reality.

Document in `PLANS/<feature>_FEATURE.md`:

```markdown
## Certainty Calibration

**Initial Certainty:** [X%]
**Outcome:** [Completed as planned | Required adjustments | Revealed unknowns]

### What We Underestimated
[Challenges that surprised us]

### What We Overestimated
[Things simpler than expected]

### What We Learned
[How to calibrate future estimates]

**Adjusted Foundation Certainty:** [X%]
```

**Truth:** If certainty was 90% but we hit major issues, we miscalibrated. Learn why.

---

## Phase 4: Update Dependency Stack

### Strengthen the Foundation

Update `PLANS/DEPENDENCY_STACK.md`:

1. **Update System Certainty**
   - Did this system reach ≥95% certainty?
   - Mark with ✅ if proven stable
   - Lower certainty if issues emerged

2. **Move Progress Marker**
   - Update `← YOU ARE HERE`
   - Reflect actual state

3. **Impact Assessment**
   - Did dependent systems gain certainty?
   - Did we uncover issues in the foundation?
   - What became clearer?

**Remember:** Truth flows upward. A solid foundation enables everything above it.

---

## Phase 5: Capture Wisdom

### What Worked

Document patterns that succeeded:

```markdown
## Success Patterns

### Design Decisions
- [Approaches that paid off]
- [Principles that guided well]
- [Validations that caught issues]

### Development Practices
- [Workflows that worked]
- [Validations that mattered]
- [Stages that built confidence]
```

### What Created Friction

Document what was hard:

```markdown
## Friction Points

### Technical Challenges
- [Mathematical difficulties]
- [Integration problems]
- [Performance issues]

### Process Challenges
- [Where stages were unclear]
- [When validation was insufficient]
- [What slowed us down]

### Principle Conflicts
- [When principles seemed to conflict]
- [What was hard to validate]
- [Where emergence was elusive]
```

### What to Change

Document learnings:

```markdown
## Future Changes

### Process Improvements
[How to plan/execute/review better]

### Principle Applications
[How to apply principles more effectively]

### Validation Enhancements
[What to validate sooner/better]
```

---

## Phase 6: Discover New Possibilities

### What Did We Learn?

Add insights to `PLANS/DESIGN_BACKLOG.md`:

- New system possibilities enabled
- Emergent behaviors to explore
- Simplifications now possible
- Compositions worth investigating

**The best feature opens more questions than it answers.**

---

## Phase 7: Document Completion

Add to `PLANS/<feature>_FEATURE.md`:

```markdown
---

## COMPLETION

**Date:** [YYYY-MM-DD]
**Duration:** [Total time from select to finalize]
**Final Certainty:** [X%]

### Summary
[2-3 sentences: what was built, what emerged, what was learned]

### System State
- Foundation Certainty: [X%]
- Principle Adherence: [Average of six scores]
- Emergent Behaviors: [Count of unexpected discoveries]
- New Possibilities: [Count of new backlog items]

### Key Learnings
1. [Most important technical learning]
2. [Most important principle learning]
3. [Most important process learning]

**The system is complete. The learning continues.**
```

---

## Phase 8: Close the Cycle

Output summary to user:

```
Feature Complete: [System Name]

Validation:
- Mathematical: All formulas proven
- Visual: Debug visualization functional
- Integration: Composition verified
- Principles: All six maintained

Emergence:
- [X] unexpected behaviors discovered
- [Y] new possibilities enabled
- [Z] simplifications identified

Foundation:
- Previous certainty: [X%]
- Current certainty: [Y%]
- Next recommended work: [System name or SELECT]

Documentation: PLANS/<feature>_FEATURE.md

The foundation is stronger. Build forward.
```

---

## The Philosophy of Finalization

### Completion Is Learning

Every feature is a hypothesis about what should be built. Finalization reveals whether the hypothesis was correct. Both confirmation and refutation are victories.

### Certainty Is Earned

We don't declare systems certain—they prove themselves through use. Finalization adjusts certainty based on truth discovered during implementation.

### Emergence Is Validation

When unexpected behaviors arise from simple rules, we've succeeded. When we had to prescribe everything, we've failed. Document both.

### Principles Compound

Each feature either strengthens or weakens our adherence to principles. Honest reflection ensures we improve with each cycle.

---

## The Questions of Closure

Before closing, ask:

1. **Did we build a system or a feature?**
   - Systems enable. Features prescribe.

2. **Did emergence surprise us?**
   - If no surprises, the system is too rigid.

3. **Are the principles stronger?**
   - Each cycle should deepen understanding.

4. **Is the foundation more certain?**
   - Certainty flows upward from truth.

5. **What did we learn?**
   - No feature should end without wisdom.

---

## The Commitment

Finalize features that:
- Strengthened the foundation
- Enabled emergence
- Maintained all principles
- Taught us something new
- Made the next system possible

Never consider complete features that:
- Violated principles for convenience
- Prescribed instead of enabled
- Left uncertainty unresolved
- Taught us nothing
- Weakened the foundation

**The best finalization celebrates emergence. The second best documents what was learned. Both honor the principles.**

**This is the way.**