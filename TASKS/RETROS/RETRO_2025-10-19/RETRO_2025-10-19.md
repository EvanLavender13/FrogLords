# Retrospective: 2025-10-19

**5 plans analyzed. 5 patterns found.**

---

## Patterns (≥3 occurrences)

**Principle Violations:**
1. **Single Source of Truth violations** (×3) - coyote_time_rationale, friction_model, wall_sliding
   - Hardcoded constants duplicating authoritative values
   - Documentation drift from implementation
   - Systems silently disagreeing on shared concepts

2. **Backwards derivation from feel** (×3) - friction_model, wall_sliding (Iteration 1 plan deviation), camera_modes (orbit inflation)
   - Starting with desired behavior, reverse-engineering physics
   - Creates non-physical parameters that obscure tuning
   - Physics should drive feel, not the reverse

3. **Undocumented principle trade-offs** (×3) - coyote_time, friction_model (pre-fix), camera_modes (mode enum)
   - Implementation exists but WHY not explained
   - Violates "Every decision must trace back to principles"
   - Future developers won't understand intentional violations

**Emergent Behaviors:**
1. **Codex review catches objective violations self-assessment missed** (×3) - friction_model, camera_modes, wall_sliding
   - Self-scores initially too optimistic (missing Single Source violations, coupling)
   - External validation essential for catching blind spots
   - Convergence validates correctness (wall_sliding Iteration 2: 9.3 = 9.3)

**Workflow Friction:**
1. **Second opinion integration smooth** (×4) - friction_model, camera_modes (3 rounds), wall_sliding (Codex caught violations)
   - Codex CLI worked well for validation
   - Multiple review rounds prevented major issues
   - Pattern: Review plan → implement → validate

**Deferred (<3 occurrences):**
1. **False positives from audit** (×1) - unused_dt_parameter
   - Codex audit identified function that never existed
   - Revisit when: More audit false positives occur (track pattern)

---

## Important Ideas from Plans

**Principle hierarchy for conflicts** (coyote_time_rationale):
- Prime Directive > Radical Simplicity > Other principles
- Document trade-offs explicitly at implementation site
- Comment format: `PRINCIPLE TRADE-OFF: [violated] for [higher principle]`

**Physics-first tuning approach** (friction_model):
- Always start with physical parameters (μ, mass, force)
- Derive gameplay feel through tuning those parameters
- Never reverse-engineer physics from desired behavior ratios
- Pattern generalizes: Air resistance, spring constants, damping

**Component extraction pattern** (camera_modes):
- Special-casing on enums indicates missing abstraction
- Delete unused modes entirely (Radical Simplicity)
- Separate pure math from behavior (camera = matrices, controller = movement)
- Forwarding methods prevent coupling

**Debug assertions = continuous validation** (wall_sliding):
- Caught edge cases during development (before playtesting)
- Preconditions + postconditions validate contracts every frame
- Zero release overhead (FL_DEBUG only)
- Superior to unit tests for foundational primitives

**Iteration process works** (wall_sliding):
- Iteration 1: 7.8/10 (violations found)
- Iteration 2: 9.3/10 (violations fixed, external validation converged)
- Process: REVISE → fix → APPROVED
- Principles as law enable accurate self-evaluation when honest

---

## Actions

**Context Files (COMMON):**
- Create `TASKS/CONTEXT/PHYSICS_FIRST_TUNING.md` - How to derive parameters from physics, not feel
- Inject into CLAUDE.md: Yes (high-value pattern for all future tuning)

**Workflow Updates (COMMON):**
- `TASKS/SYSTEM.md`: Add checkpoint "Validate plan with Codex before implementing" (prevents plan-implementation mismatches)
- `TASKS/REFINE.md`: Add step "Search for Single Source violations" in FIX section (pattern occurred 3×)

**Backlog Updates (COMMON):**
- None - no new refinements or systems identified

**PRINCIPLES.md Updates (RARE):**
- None - principles themselves are correct, violations were in implementation

---

## Summary

- Patterns: 5 (3 violations, 1 emergent, 1 workflow)
- Important Ideas: 5
- Actions: 1 context file, 2 workflow updates, 0 backlog
- Execute: Create physics-first tuning guide, then update workflow docs
- Is workflow working? **Yes** - All plans completed successfully. Second opinion integration prevented major issues. Iteration process fixed violations (7.8→9.3). One false positive (acceptable rate).

---
